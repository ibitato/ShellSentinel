<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Plugin-Entwicklung · Shell Sentinel</title>
    <meta
      name="description"
      content="Erweitere Shell Sentinel mit eigenen Plugins: Lebenszyklus, Struktur, Lokalisierung, Tests und Distribution."
    />
    <link rel="canonical" href="https://www.shellsentinel.net/manuals/plugin-development-de.html" />
    <link rel="alternate" hreflang="x-default" href="https://www.shellsentinel.net/manuals/plugin-development-en.html" />
    <link rel="alternate" hreflang="en" href="https://www.shellsentinel.net/manuals/plugin-development-en.html" />
    <link rel="alternate" hreflang="es" href="https://www.shellsentinel.net/manuals/plugin-development-es.html" />
    <link rel="alternate" hreflang="de" href="https://www.shellsentinel.net/manuals/plugin-development-de.html" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="../assets/css/styles.css" />
    <link rel="stylesheet" href="../assets/css/manuals.css" />
    <link rel="icon" href="../assets/img/favicon.svg" type="image/svg+xml" />
  </head>
  <body class="manual">
    <div class="manual-wrapper">
      <header class="manual-header">
        <div class="breadcrumb">
          <a href="../docs.html">&larr; Zur Dokumentation</a>
          <span>/ Plugin-Entwicklung (DE)</span>
        </div>
      </header>

      <main class="manual-content">
        <h1>Plugin-Entwicklung — Shell Sentinel</h1>

        <h2>Überblick</h2>
        <p>
          Plugins helfen dabei, Workflows anzupassen, interne Leitfäden sichtbar zu machen und
          Integrationen nahtlos in der TUI bereitzustellen. Jedes Python-Modul im konfigurierten
          Verzeichnis <code>plugins/</code> wird beim Start geladen – ohne Änderungen am Kernprodukt.
        </p>

        <h2>Lebenszyklus im Überblick</h2>
        <ol>
          <li>Lege ein Modul in <code>plugins/</code> (Standardpfad) oder dem Pfad an, den <code>SMART_AI_SYS_ADMIN_PLUGINS_DIR</code> vorgibt.</li>
          <li>Implementiere <code>register(registry)</code>. Die TUI ruft die Funktion einmal kurz nach dem Start auf.</li>
          <li>Registriere dort Slash-Commands, Übersetzungen, Autocomplete-Hinweise und Logging.</li>
          <li>Starte die Anwendung neu, um das Plugin während der Entwicklung erneut zu laden.</li>
        </ol>

        <h2>Beispiel: erstes Kommando</h2>
        <p>Der folgende Ausschnitt zeigt die Minimalstruktur eines konversationellen Kommandos:</p>
        <pre><code class="language-python"># plugins/status_report.py
from smart_ai_sys_admin.plugins import PluginRegistry, PluginSlashCommand


def _server_report(args: list[str]) -> str:
    target = args[0] if args else "default"
    return (
        f"### Status für `{target}`\n"
        "- Ausstehende Jobs: 3\n"
        "- Letztes Backup: 2025-10-06\n"
        "- Bereitschaft: infra@contoso.com"
    )


def register(registry: PluginRegistry) -> None:
    registry.register_translations(
        "de",
        {"plugins": {"status_report": {"description": "Kurzer Systemstatus"}}},
    )
    registry.register_command(
        PluginSlashCommand(
            name="/status_report",
            aliases=("/statusbericht",),
            handler=_server_report,
            description_key="plugins.status_report.description",
        )
    )
</code></pre>
        <p>
          Handler liefern Markdown, das im Konversations-Panel erscheint. Ausnahmen protokolliert der
          Logger <code>smart_ai_sys_admin.plugins</code> – halte Fehlermeldungen daher prägnant und
          ergänze wenn möglich Hinweise zur Behebung.
        </p>

        <h2>Lokalisierung &amp; Nutzererlebnis</h2>
        <ul>
          <li>Nutze <code>register_translations(locale, payload)</code>, damit alle Sprachen abgedeckt sind; die App wählt automatisch das aktive Locale.</li>
          <li>Ergänze optional eine <code>suggestion</code>-Funktion, um den Inline-Autocomplete anzupassen.</li>
          <li>Verwende kompaktes Markdown und markiere irreversible Aktionen deutlich vor der Ausführung.</li>
        </ul>

        <h2>Tests &amp; Beobachtbarkeit</h2>
        <ul>
          <li>Schreibe Unit-Tests oder kleine Testskripte, um Handler ohne TUI zu validieren.</li>
          <li>Setze <code>SMART_AI_SYS_ADMIN_LOG_LEVEL=DEBUG</code>, um beim Entwickeln ausführlichere Logs zu erhalten.</li>
          <li>Bei Ladefehlern helfen <code>logs/app.log</code> sowie der Befehl <code>/status</code>, um registrierte Kommandos zu prüfen.</li>
        </ul>

        <h2>Paketierung &amp; Verteilung</h2>
        <p>
          Verteile Plugins zusammen mit Deployments oder über ein internes Paket-Repository. Shell
          Sentinel lädt jede Erweiterung auf dem Plugin-Pfad, weshalb Dokumentation zu benötigten
          Credentials, Umgebungsvariablen und möglichen Rollbacks unerlässlich ist.
        </p>
      </main>

      <footer class="manual-footer">
        © 2025 Shell Sentinel. Aktualisiere dieses Handbuch, sobald neue Plugin-Funktionen erscheinen.
      </footer>
    </div>
  </body>
</html>
