<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Plugin development · Shell Sentinel</title>
    <meta
      name="description"
      content="Extend Shell Sentinel with custom plugins: lifecycle, structure, localisation, testing guidance and distribution tips."
    />
    <link rel="canonical" href="https://www.shellsentinel.net/manuals/plugin-development-en.html" />
    <link rel="alternate" hreflang="x-default" href="https://www.shellsentinel.net/manuals/plugin-development-en.html" />
    <link rel="alternate" hreflang="en" href="https://www.shellsentinel.net/manuals/plugin-development-en.html" />
    <link rel="alternate" hreflang="es" href="https://www.shellsentinel.net/manuals/plugin-development-es.html" />
    <link rel="alternate" hreflang="de" href="https://www.shellsentinel.net/manuals/plugin-development-de.html" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="../assets/css/styles.css" />
    <link rel="stylesheet" href="../assets/css/manuals.css" />
    <link rel="icon" href="../assets/img/favicon.svg" type="image/svg+xml" />
  </head>
  <body class="manual">
    <div class="manual-wrapper">
      <header class="manual-header">
        <div class="breadcrumb">
          <a href="../docs.html">&larr; Back to documentation</a>
          <span>/ Plugin development (EN)</span>
        </div>
      </header>

      <main class="manual-content">
        <h1>Plugin development — Shell Sentinel</h1>

        <h2>Overview</h2>
        <p>
          Plugins let engineering teams tailor workflows, surface internal guides and expose
          integrations that feel native in the Shell Sentinel terminal UI. Every Python module placed
          under the configured <code>plugins/</code> directory loads at startup, so you can iterate
          without patching the core distribution.
        </p>

        <h2>Lifecycle at a glance</h2>
        <ol>
          <li>Create a module in <code>plugins/</code> (default) or the directory referenced by <code>SMART_AI_SYS_ADMIN_PLUGINS_DIR</code>.</li>
          <li>Expose <code>register(registry)</code>. The TUI calls it once after the interface boots.</li>
          <li>Register slash commands, translations, autocomplete hints and logging from that entrypoint.</li>
          <li>Restart the application to reload the plugin while iterating locally.</li>
        </ol>

        <h2>Starter command template</h2>
        <p>The snippet below shows the minimal structure for a conversational command:</p>
        <pre><code class="language-python"># plugins/status_report.py
from smart_ai_sys_admin.plugins import PluginRegistry, PluginSlashCommand


def _server_report(args: list[str]) -> str:
    target = args[0] if args else "default"
    return (
        f"### Status for `{target}`\n"
        "- Pending jobs: 3\n"
        "- Last backup: 2025-10-06\n"
        "- Owner on call: infra@contoso.com"
    )


def register(registry: PluginRegistry) -> None:
    registry.register_translations(
        "en",
        {"plugins": {"status_report": {"description": "Quick status overview"}}},
    )
    registry.register_command(
        PluginSlashCommand(
            name="/status_report",
            aliases=("/statusreport",),
            handler=_server_report,
            description_key="plugins.status_report.description",
        )
    )
</code></pre>
        <p>
          Handlers return Markdown that renders in the conversation panel. Any exception is captured
          by the <code>smart_ai_sys_admin.plugins</code> logger, so keep messages actionable and share
          remediation tips when failures are recoverable.
        </p>

        <h2>Localisation &amp; experience</h2>
        <ul>
          <li>Call <code>register_translations(locale, payload)</code> for every supported language; the app resolves them according to the active locale.</li>
          <li>Provide a <code>suggestion</code> callback when you want to customise the inline autocomplete beneath the input field.</li>
          <li>Keep Markdown concise and highlight destructive or irreversible actions so operators can review them before execution.</li>
        </ul>

        <h2>Testing &amp; observability</h2>
        <ul>
          <li>Create fast unit tests or lightweight harness scripts to validate handlers without launching the TUI.</li>
          <li>Toggle verbose logging with <code>SMART_AI_SYS_ADMIN_LOG_LEVEL=DEBUG</code> while iterating locally.</li>
          <li>When a plugin fails to load, inspect <code>logs/app.log</code> and run <code>/status</code> to confirm command registration.</li>
        </ul>

        <h2>Packaging &amp; distribution</h2>
        <p>
          Bundle plugins with deployment artefacts or publish them in an internal package index. Shell
          Sentinel loads any module available on the plugin path, so document prerequisites such as API
          keys, environment variables and remote endpoints. Include rollback instructions so
          operations teams can disable an extension quickly if needed.
        </p>
      </main>

      <footer class="manual-footer">
        © 2025 Shell Sentinel. Keep this manual updated as new plugin capabilities ship.
      </footer>
    </div>
  </body>
</html>
